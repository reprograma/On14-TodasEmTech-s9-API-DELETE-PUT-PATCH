ENTRAR NA PASTA QUE FARÁ O SERVIDOR
$ cd reprogramaflix/

CONFIGURANDO SERVIDOR
$ npm init -y
$ npm i express
$ npm i nodemon
$ touch .gitignore
$ npm i cors

DEPOIS INSTALAÇÃO
Alterar no Package.json 
"start": "nodemon server.js"

Alterar no gitignore
node_modules/

CODANDO NO SERVER.JSON
EXEMPLO:
const filmesJson = require("./models/filmes.json") //puxar filmes data
const express = require("express") // chamando express
const app = express() //executando o express

// configurando porta
app.listen(7070, ()=>{
console.log("alo doçura? to na porta 7070")
})


DEPOIS CONFIGURAR SERVER, DAR START
$npm start

ESTRUTURA MVC
$ mkdir src // criar pasta
$ cd src // entrar na pasta
$ touch app.js // criar arquivo
$ mkdir routes controllers models // criando as 3 pastas

organizar o vs code, arrastar models pra dentro do src

transformar os APP em funções dentro do controllers 
transforar em funçoes a ser cahamas em qualquer lugar do arquivo
module.exports = {
    getAll,
    getById
}
ela vai ser chamada na parte de rotas

EM FILMES ROUTES - chamar no controlles, dentro de routes
const controller = require("../controllers/filmesController")

ROUTE - no app colocando a rota rais no aap.


router.get("/catalogo", controller.getAll) //que nem faz do app
router.get("/:id", controller.getById)

exportar DEPOIS com module.exports = router

(apertar crtl mais o link ele abre o arquivo)

IR ARQUIVO APP E CHAMAR OS APPS
exportar o app no ap.jj

module.exports = app

VOLTAR PRO SERVER



ta certo

duvida clarice correta:
O processo então geral de construção é:
 modules -> controllers -> routers -> app -> server? É isso?


PUT PATCH servem para fazer uma atualização algo que ja existe no BC
PUT - subtitui todo objeto que seja modificar
PATCH - modifica somente um item no objeto

indepotencia, quando há atualizações mas que nao altera banco de dados
por ex, quando clica em comprar varias vezes, qdo ta travando, ele nao permite que gere varias compras do clliente.
isso serve como p PATCH
(indepotente é o ex do like, só com put ele apaga, pra ser idepontente ele tem que manter os likes anteriores)

put vai atualizar o filme todo, o patch vai atualizar só o titulo do filme

no post manda body

pathc tem que mandar id e body


REFATORAR O SERVIDOR FEITO NAS AULA ANTERIOR, ATIVIDADE EXTRA


//Como consultar se a porta esta aberta (o 7070 é subtituivel)
//netstat -ano | findstr :7070
//se estiver rodado vai retornar tcp, se não, nao retorna nada

//COMO FECHAR A PORTA, QUANDO VC PERDE

/*Windons -> cmd (prompt de comando) -> netstat -ano | findstr :7070 

(pega o numero que vem após o listening)

tskill 15596 (o numero é o que listenning)
fecha a porta*/


BANCO DE DADOS

npm i mongoose - instalar via git ferramente de modelagem para mongo
facilita utilização do banco de dados / instalar dependencia

npm i dotenv-safe - serve ocultar dados sensiveis de publico, vc tem que colocar / usuario senha
.env no gitignore.
